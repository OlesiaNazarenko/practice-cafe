(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"7yj7":function(e,t,r){var n=r("mp5j");e.exports=(n.default||n).template({1:function(e,t,r,n,a){var i=e.lambda,s=e.escapeExpression;return'<li class="table" data-id="'+s(i(t,t))+'">\r\n    <h3 class="table-title">Table - '+s(i(t,t))+'</h3>\r\n    <button class="table-btn" data-action="open-order"> Open order list</button>\r\n</li>\r\n'},compiler:[8,">= 4.3.0"],main:function(e,t,r,n,a){var i,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(i=s(r,"each").call(null!=t?t:e.nullContext||{},null!=t?s(t,"tables"):t,{name:"each",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a,loc:{start:{line:1,column:0},end:{line:6,column:9}}}))?i:""},useData:!0})},L1EO:function(e,t,r){},QfWi:function(e,t,r){"use strict";r.r(t);r("L1EO"),r("lYjL"),r("IlJM"),r("RtS0"),r("lmye"),r("x3Br"),r("D/wG"),r("fp7Y"),r("wCa+"),r("zSSO"),r("Muwe"),r("aZFp"),r("3dw1");var n=[{id:"capuchino",name:"Капучино",price:45},{id:"late",name:"Лате",price:40},{id:"napoleon",name:"Торт Наполеон",price:75},{id:"water-0.5",name:"Вода без газа 0,5",price:20},{id:"zavarnoe",name:"Пирожное Заварное",price:38},{id:"espresso",name:"Еспрессо",price:30},{id:"marcepan",name:"Марцепан",price:45},{id:"fresh-orang-0.3",name:"Фреш Апельсиновый 0,3",price:45}],a=[{table:1,service:""},{table:2,service:""},{table:3,service:""},{table:4,service:""},{table:5,service:""},{table:6,service:""},{table:7,service:""},{table:8,service:""}],i=[{name:"Ann",isPresent:!0,tables:[],tips:0},{name:"Nick",isPresent:!1,tables:[],tips:0},{name:"Carrol",isPresent:!0,tables:[],tips:0},{name:"Jack",isPresent:!1,tables:[],tips:0},{name:"Berry",isPresent:!1,tables:[],tips:0},{name:"Jim",isPresent:!0,tables:[],tips:0}],s=new(function(){function e(e){var t=e.menu,r=e.tables,n=e.workers;this.menu=t,this.tables=r,this.workers=n}var t=e.prototype;return t.getPresentWorkers=function(){this.presentWorkers=this.workers.filter((function(e){return e.isPresent}))},t.checkTables=function(){var e=this;this.getPresentWorkers(),this.tables.forEach((function(t,r){var n=r%e.presentWorkers.length;t.service=e.presentWorkers[n].name,e.presentWorkers[n].tables.push(t.table)}))},t.getOrder=function(e,t,r){var n,a=this.findTable(e);if(a.currentOrder||(a.currentOrder={}),a.currentOrder[t])return a.currentOrder[t]+=r;a.currentOrder=Object.assign({},a.currentOrder,((n={})[t]=r,n))},t.findTable=function(e){return this.tables.find((function(t){return t.table===e}))},t.addDish=function(e,t){var r,n=this.findTable(e);if(n.currentOrder||(n.currentOrder={}),n.currentOrder[t])return n.currentOrder[t]+=1;n.currentOrder=Object.assign({},n.currentOrder,((r={})[t]=1,r))},t.removeDish=function(e,t){var r,n=this.findTable(e);n.currentOrder&&n.currentOrder[t]&&(n.currentOrder[t]-=1,n.currentOrder=Object.assign({},n.currentOrder,((r={})[t]=0,r)))},t.resetDish=function(e,t){var r=this.findTable(e);r.currentOrder&&r.currentOrder[t]&&delete r.currentOrder[t]},t.findDish=function(e){this.menu.find((function(t){return t.id===e}))},t.prepeareDish=function(e){var t=this.findTable(e);if(t.currentOrder){var r=this.setmenuMap(),n=Object.entries(t.currentOrder).map((function(e){var t=e[0],n=e[1];return r[t].name+" - "+n}));t.prepearing=n}},t.setmenuMap=function(){return n.reduce((function(e,t){return e[t.id]=t,e}),{})},t.dishFinish=function(e,t,r){var n=this.findTable(e);n.prepearing=n.prepearing.map((function(e){var n=e.split(" - "),a=n[0],i=n[1];return a===t?a+" - "+(Number(i)-r):e})).filter((function(e){return Number(e.split(" - ")[1])>0}))},t.removeDishFinish=function(e,t,r){var n=this.findTable(e);console.log(n),n.prepearing=n.prepearing.map((function(e){var n=e.split(" - "),a=n[0],i=n[1];return a===t?a+" - "+(Number(i)-r):e})).filter((function(e){return Number(e.split(" - ")[1])>0}))},e}())({menu:n,tables:a,workers:i}),l=r("yu7U"),o=r.n(l),c=function(e){var t=e.querySelector("[id]");t&&e.removeChild(t)},u=function(e){if("BUTTON"===e.target.nodeName&&"close"!==e.target.dataset.action){var t=+e.target.closest("section").id.split("-")[2],r=e.target.closest("li"),n=r.id,a=r.querySelector(".quantity"),i=e.target.dataset.action,l=Number(a.textContent);switch(i){case"add":s.addDish(t,n),l+=1;break;case"remove":s.removeDish(t,n),l>0&&(l-=1);break;case"reset":s.resetDish(t,n),l=0}a.textContent=l}},d=function(e,t){var r=o()({tableNum:e,orderList:s.menu});t.insertAdjacentHTML("beforeend",r);var n=document.getElementById("order-list-"+e);console.log(n),t.querySelector('[data-action="close"]').addEventListener("click",(function(e){c(t)})),n.addEventListener("click",u)},p=r("7yj7"),b=r.n(p),m={body:document.body,servicePanel:document.createElement("section"),tableList:document.createElement("ul")};m.servicePanel.insertAdjacentElement("afterbegin",m.tableList),m.body.insertAdjacentElement("afterbegin",m.servicePanel),s.checkTables();var f=s.presentWorkers[0].tables,h=b()({tables:f});m.tableList.insertAdjacentHTML("afterbegin",h),m.tableList.addEventListener("click",(function(e){if("BUTTON"===e.target.nodeName){var t=e.target.closest("li").dataset.id;c(m.servicePanel),d(t,m.servicePanel)}}))},yu7U:function(e,t,r){var n=r("mp5j");e.exports=(n.default||n).template({1:function(e,t,r,n,a){var i=e.lambda,s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <li id="'+s(i(null!=t?l(t,"id"):t,t))+'">\r\n            <span>'+s(i(null!=t?l(t,"name"):t,t))+'</span>\r\n            <button type="button" data-action="add">+</button>\r\n            <span class=\'quantity\'>0</span>\r\n            <button type="button" data-action="remove">-</button>\r\n            <button type="button" data-action="reset">reset</button>\r\n        </li>\r\n'},compiler:[8,">= 4.3.0"],main:function(e,t,r,n,a){var i,s,l=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,c=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<section id="order-list-'+c("function"==typeof(s=null!=(s=u(r,"tableNum")||(null!=t?u(t,"tableNum"):t))?s:o)?s.call(l,{name:"tableNum",hash:{},data:a,loc:{start:{line:1,column:24},end:{line:1,column:36}}}):s)+'">\r\n    <h3>Table '+c("function"==typeof(s=null!=(s=u(r,"tableNum")||(null!=t?u(t,"tableNum"):t))?s:o)?s.call(l,{name:"tableNum",hash:{},data:a,loc:{start:{line:2,column:14},end:{line:2,column:26}}}):s)+"</h3>\r\n    <ul>\r\n"+(null!=(i=u(r,"each").call(l,null!=t?u(t,"orderList"):t,{name:"each",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a,loc:{start:{line:4,column:8},end:{line:12,column:17}}}))?i:"")+'    </ul>\r\n    <button type="button" data-action="close">Close order</button>\r\n</section>'},useData:!0})}},[["QfWi",1,2]]]);
//# sourceMappingURL=main.bbea37f1f1052bcec86e.js.map